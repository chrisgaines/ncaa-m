
function MM_preloadImages() {
	if(imagecached  ==  false){
		var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
		var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(var i=a.length-1; i>-1; i--)
		if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
		}
	}

var imagecached = false;
var clearfield = false;
var currentShotData = new String("1,19:47,1,1715975,6,1,0,-37,0~1,19:47,1,1715975,10,0,0,-23,14~0,19:18,1,1647616,21,0,14,35,14~1,19:10,1,1333799,23,1,5,-30,9~0,18:33,1,1716219,20,1,0,37,0~1,18:17,1,1333799,1,0,-12,-19,22~0,17:46,1,1647616,1,1,-6,14,24~0,16:15,1,1647618,1,0,-3,21,16~1,16:09,1,1715975,1,1,-13,-18,23~0,15:40,1,1647615,21,1,8,25,14~0,14:47,1,1647615,1,1,5,16,22~1,14:32,1,1715973,1,0,-10,-33,11~0,14:19,1,1647619,1,0,21,30,22~0,13:48,1,1647615,5,1,0,37,0~1,13:35,1,1780821,6,0,0,-37,0~0,13:10,1,1647618,1,0,0,13,24~1,12:57,1,1647318,1,1,13,-31,14~0,12:24,1,1647615,1,1,3,14,23~1,12:03,1,1780821,11,1,0,-23,14~1,12:03,1,1780821,12,1,0,-23,14~0,11:30,1,1716219,1,0,11,11,28~1,11:19,1,1715973,1,0,-13,-18,23~1,11:14,1,1780818,11,0,0,-23,14~1,11:14,1,1780818,12,0,0,-23,14~0,10:55,1,1647616,26,0,0,37,0~0,10:43,1,1647616,1,1,8,27,13~1,10:15,1,1715975,1,1,6,-25,13~1,9:25,1,1780821,5,0,0,-37,0~1,9:25,1,1715975,5,1,0,-37,0~0,8:54,1,1647618,1,0,14,30,16~1,8:43,1,1780821,1,1,-9,-15,24~0,8:16,1,1905345,11,0,0,23,14~0,8:16,1,1905345,12,0,0,23,14~0,8:07,1,1781050,1,1,-12,15,25~1,7:46,1,1715975,1,0,22,-25,25~0,7:20,1,1781050,1,0,-18,22,23~0,6:49,1,1647616,1,0,-9,37,9~1,6:34,1,1333799,6,1,0,-37,0~1,5:55,1,1780818,8,1,0,-37,0~0,5:40,1,1647618,1,1,12,15,25~1,5:24,1,1780818,24,1,4,-31,7~0,4:48,1,1647618,1,0,1,29,8~1,4:39,1,1780821,23,1,0,-29,8~0,4:02,1,1781050,1,0,12,16,24~1,3:52,1,1780818,1,1,12,-36,12~0,3:28,1,1647616,1,0,14,35,14~1,3:17,1,1780821,1,1,11,-28,14~1,2:30,1,1333799,1,1,6,-13,25~0,1:52,1,1781052,1,0,22,36,22~1,1:39,1,1780818,1,0,-5,-30,9~0,1:18,1,1647616,5,0,0,37,0~0,1:18,1,1647616,5,0,0,37,0~1,1:05,1,1715975,1,0,-4,-25,13~0,31.0,1,1781052,13,0,0,23,14~0,31.0,1,1781052,14,1,0,23,14~0,31.0,1,1781052,15,1,0,23,14~0,3.0,1,1647618,5,1,0,37,0~1,1.0,1,1715975,1,0,-6,0,75~1,19:50,2,1333799,1,0,13,-31,14~0,19:31,2,1647618,1,1,17,21,23~1,19:08,2,1647318,1,0,19,-25,22~0,18:41,2,1647615,6,1,0,37,0~0,18:41,2,1647615,10,0,0,23,14~1,18:23,2,1647318,1,1,12,-18,22~0,17:56,2,1647618,1,1,-19,20,25~1,17:35,2,1647318,5,0,0,-37,0~0,17:11,2,1716219,1,0,-6,22,16~1,17:02,2,1647318,6,1,0,-37,0~1,16:33,2,1647318,1,0,-8,-24,15~0,16:24,2,1647615,11,1,0,23,14~0,16:24,2,1647615,12,1,0,23,14~1,16:13,2,1715975,6,1,0,-37,0~0,15:48,2,1647619,1,1,19,23,24~1,15:34,2,1780818,24,1,-5,-30,9~0,15:04,2,1647618,1,0,5,13,25~1,14:45,2,1780818,1,1,11,-38,11~0,14:10,2,1647615,1,0,-2,26,11~0,14:09,2,1647618,1,0,-8,30,11~1,13:40,2,1333799,20,1,0,-37,0~0,13:09,2,1781050,1,0,-10,14,25~0,13:05,2,1647619,11,0,0,23,14~0,13:05,2,1647619,12,1,0,23,14~1,12:42,2,1780818,6,1,0,-37,0~0,12:05,2,1647618,23,0,-9,27,13~1,11:11,2,1647318,5,0,0,-37,0~0,10:59,2,1647615,1,1,-2,12,25~1,10:36,2,1780821,5,0,0,-37,0~0,10:27,2,1781050,1,1,17,20,24~1,10:01,2,1333799,1,1,-4,-13,24~0,9:26,2,1647618,1,1,0,12,25~1,9:12,2,1780819,5,1,0,-37,0~0,8:37,2,1781052,1,1,17,25,21~1,8:22,2,1333799,5,0,0,-37,0~1,8:18,2,1780819,5,0,0,-37,0~1,8:12,2,1780818,5,0,0,-37,0~0,8:01,2,1781050,1,1,-22,32,23~1,7:36,2,1780821,9,0,0,-37,0~1,7:34,2,1780818,24,1,11,-36,11~1,7:34,2,1780818,10,1,0,-23,14~0,7:06,2,1647618,1,1,-19,20,25~1,6:43,2,1647318,24,0,-2,-33,4~1,6:37,2,1780819,5,1,0,-37,0~0,6:18,2,1647616,1,0,-16,19,24~1,6:07,2,1780821,6,1,0,-37,0~0,5:05,2,1781052,1,0,-7,11,27~1,4:47,2,1780821,1,1,6,-23,15~0,4:14,2,1647616,1,1,-9,29,12~1,3:50,2,1333799,11,1,0,-23,14~1,3:50,2,1333799,12,1,0,-23,14~0,3:23,2,1647618,1,0,-9,15,24~1,3:12,2,1780821,5,0,0,-37,0~0,2:38,2,1647619,1,0,9,36,9~0,2:05,2,1647619,1,0,16,17,26~1,1:37,2,1780821,1,0,6,-26,13~0,32.0,2,1781052,11,1,0,23,14~0,32.0,2,1781052,12,1,0,23,14~1,19.0,2,1647318,10,0,0,-23,14~0,2.0,2,1647618,1,0,4,11,26~0,1.0,2,1781052,21,0,11,37,11");
var playerDataHomeString = new String("1780818:C.J.&nbsp;Fair,5,F,7-9,0-0,1-3,15|1333799:Scoop&nbsp;Jardine,11,G,5-8,2-3,2-2,14|1780821:Dion&nbsp;Waiters,3,G,5-11,1-1,2-2,13|1715975:Brandon&nbsp;Triche,20,G,5-7,1-2,0-1,11|1647318:Kris&nbsp;Joseph,32,F,3-8,1-2,0-1,7|1780819:Baye&nbsp;Keita,12,C,2-4,0-0,0-0,4|1647319:Brandon&nbsp;Reese,24,G,0-0,0-0,0-0,0|1715971:Nick&nbsp;Resavy,2,G,0-0,0-0,0-0,0|1715973:James&nbsp;Southerland,43,F,0-2,0-1,0-0,0|1715974:Matt&nbsp;Tomaszewski,34,F,0-0,0-0,0-0,0|1723884:Griffin&nbsp;Hoffmann,13,G,0-0,0-0,0-0,0|1726229:Matt&nbsp;Lyde-Cajuste,14,F,0-0,0-0,0-0,0|1780820:Fab&nbsp;Melo,51,C,0-0,0-0,0-0,0|1784336:Russ&nbsp;DeRemer,23,G,0-0,0-0,0-0,0|1784337:Nolan&nbsp;Hart,4,G,0-0,0-0,0-0,0|1905070:Michael&nbsp;Carter-Williams,1,G,0-0,0-0,0-0,0|1905071:Rakeem&nbsp;Christmas,25,F,0-0,0-0,0-0,0|1905073:Albert&nbsp;Nassar,33,F,0-0,0-0,0-0,0");
var playerDataAwayString = new String("1647615:Jared&nbsp;Berggren,40,F-C,6-7,3-3,2-3,17|1647618:Jordan&nbsp;Taylor,11,G,6-15,5-9,0-0,17|1781050:Ben&nbsp;Brust,1,G,3-6,3-6,0-0,9|1647616:Ryan&nbsp;Evans,5,G-F,3-11,1-2,0-0,7|1781052:Josh&nbsp;Gasser,21,G,1-3,1-3,4-5,7|1647619:Rob&nbsp;Wilson,33,G-F,1-4,1-3,1-2,4|1716219:Mike&nbsp;Bruesewitz,31,F,1-3,0-1,0-0,2|1716220:Dan&nbsp;Fahey,10,G,0-0,0-0,0-0,0|1781049:Evan&nbsp;Anderson,32,C,0-0,0-0,0-0,0|1781051:Duje&nbsp;Dukan,13,F,0-0,0-0,0-0,0|1781053:J.D.&nbsp;Wise,22,G,0-0,0-0,0-0,0|1905344:Traevon&nbsp;Jackson,12,G,0-0,0-0,0-0,0|1905345:Frank&nbsp;Kaminsky,44,F,0-0,0-0,0-2,0|1905347:Jordan&nbsp;Smith,2,G,0-0,0-0,0-0,0");
var playerDataString = new String();

if(playerDataHomeString.length!=0&&playerDataAwayString.length!=0){
	playerDataString=playerDataHomeString+"|"+playerDataAwayString;
	}
else if(playerDataHomeString.length!=0){
	playerDataString=playerDataHomeString;
	}
else if(playerDataAwayString.length!=0){
	playerDataString=playerDataAwayString;
	}

//Begin Player Data Parse
var playerDataStringsArray = playerDataString.split("|");
var playerDataArray = new Array(); 

for(x in playerDataStringsArray){
	var tempArray = new Array(); 
	var tempString = new String(playerDataStringsArray[x]); 
	tempArray = tempString.split(":");
	playerDataArray.push(tempArray[0]);
	playerDataArray.push(tempArray[1]);
	}

//Begin Shot Constructor
function shot(){};
shot();
// Sets defaults for team
sp = shot.prototype;
sp.awayAbbr  = "WI";
sp.homeAbbr  = "SYR";
sp.awayColor = "#B53831";
sp.homeColor = "#1A3E86";
sp.imageServer = "http://sports.cbsimg.net";

// The maximum number of shots allowed on a field
sp.maxCurrentshots = 40;
// Field width
sp.x = 300;
//Field Height
sp.y = 282;
//Field Ratio
sp.ratio = 6;

sp.shotTypeArray = new Array();
sp.shotTypeArray[0] = "Shot";
sp.shotTypeArray[1] = "Jump Shot";
sp.shotTypeArray[2] = "Running Jump";
sp.shotTypeArray[3] = "Hook Shot";
sp.shotTypeArray[4] = "Tip-in";
sp.shotTypeArray[5] = "Layup";
sp.shotTypeArray[6] = "Driving Layup";
sp.shotTypeArray[7] = "Dunk Shot";
sp.shotTypeArray[8] = "Slam Dunk";
sp.shotTypeArray[9] = "Driving Dunk";
sp.shotTypeArray[19] = "Finger Roll";
sp.shotTypeArray[20] = "Reverse Layup";
sp.shotTypeArray[21] = "Turnaround Jump Shot";
sp.shotTypeArray[22] = "Fadeaway Jump Shot";
sp.shotTypeArray[23] = "Floating Jump Shot";
sp.shotTypeArray[24] = "Leaning Jump Shot";
sp.shotTypeArray[25] = "Mini Hook Shot";
sp.shotResultArray = new Array("missed","made");
sp.playerDataArray = playerDataArray;

//Begin current Shot logic
sp.currentShots = new Object();
sp.currentShots.childNodes = new Array();
sp.shotDataArray = currentShotData.split("~");
sp.shotCount = sp.shotDataArray.length;

//Generic functions to add a child object to any compatible type of parent object
sp.createNode = function append(parent, child){
	parent[parent.length] = child;
	}

///Erases all childen of a given object until an element of "aSeperator" is reached. This deals with N6 counting children
//differently from IE making it hard to simply rely on the expected number of elements.
sp.clearObject = function(obj){
	for(var i=(obj.childNodes.length-1);i>-1;i--){
		if(obj.childNodes[i].id=="field"){
			return;
			}
		else{
			obj.removeChild(obj.childNodes[i]);
			}
		}
	return;
	}

// Creates a function that creates an exact copy of an existing Object vs a reference to such an Object
sp.cloneObject = function(what) {
	for (anElement in what) {
		if (typeof what[anElement] == 'object') {
			this[anElement] = new sp.cloneObject(what[anElement]);
			}
		else{
			this[anElement] = what[anElement];
			}
		}
	}

sp.getPlayerInformation = function(playerid){
	var y = sp.playerDataArray.length-1;
	do{
		if(parseInt(sp.playerDataArray[y-1])==parseInt(playerid)){
			return sp.playerDataArray[y];
			}
		y=y-2;
		}
	while (y>-1);
	var nodata="Data Unavailable,0,F,0-0,0-0,0-0,0";
	return nodata;
	}

sp.createChildNode = function(a,b,c,d,e,f,g,h,i){
	//Create Object that will holds table name, data and events
	newChild = new Object();
	newChild.possession = parseInt(a);
	newChild.miltime = b;
	newChild.currentperiod = parseInt(c);
	newChild.playerid = parseInt(d);
	newChild.shottype = parseInt(e);
	newChild.shotresult = parseInt(f);
	newChild.xcoord = parseInt(g);
	newChild.ycoord = parseInt(h);
	newChild.distance = parseInt(i);
	newChild.playerimage = "http://sports.cbsimg.net/images/collegebasketball/players/60x80/" + d +".jpg";

	if(newChild.possession==0){
		newChild.iconsrc = drwp.callImageUrl("awayicon");
		newChild.iconhref = "/collegebasketball/teams/page/WI";
		}
	else{
		newChild.iconsrc = drwp.callImageUrl("homeicon");
		newChild.iconhref = "/collegebasketball/teams/page/SYR";
		}

	playerStatsString = this.getPlayerInformation(d);
	playerStatsArray = playerStatsString.split(",");
	newChild.playerurl = "<a href='/collegebasketball/players/playerpage/"+d+"' target='_new'><b>" + playerStatsArray[0] + "</b></a>";
	newChild.playername = playerStatsArray[0].replace("&nbsp;"," ")
	newChild.jersey= playerStatsArray[1];
	newChild.playerposition= playerStatsArray[2];
	newChild.FGs = playerStatsArray[3];
	newChild.threeFG = playerStatsArray[4];
	newChild.FT = playerStatsArray[5];
	newChild.TP = playerStatsArray[6];
	newChild.totals = playerStatsArray[6];
	newChild = new this.cloneObject(newChild);
	this.createNode(this.currentShots.childNodes,newChild);
	}
//End shot Constructor


//This is the Begins the Draw consructor function
function drawShot(){}
drawShot();

drwp=drawShot.prototype;

//Set the ID of the elements that contain the field and the Shot Chart Text
drwp.getObjects = function(){ 
	drwp.currentShotField = document.getElementById("court");
	drwp.currentShotFieldText = document.getElementById("shotinfo");
	drwp.currentTeamIcon = document.getElementById("teamIcon");
	drwp.currentPlayerName = document.getElementById("playername");
	drwp.currentPlayerJersey = document.getElementById("playerjersey");
	drwp.currentPlayerPosition = document.getElementById("playerposition");	
	drwp.currentFGs = document.getElementById("FGs");
	drwp.current3FG = document.getElementById("3FG");
	drwp.currentFT = document.getElementById("FT");
	drwp.currentTP = document.getElementById("TP");
	drwp.currentLayups = document.getElementById("layups");
	drwp.currentJumpers = document.getElementById("jumpers");
	drwp.currentDunks = document.getElementById("dunks");
	drwp.currentPlayerImage = document.getElementById("playerImage");
	drwp.currentPlayerLink = document.getElementById("playerLink");
	drwp.currentIconLink = document.getElementById("IconLink");
	drwp.currentTeamTotal = document.getElementById("TP");
	}

///Erases all childen of a given object until an element of "aSeperator" is reached. This deals with N6 counting children
//differently from IE making it hard to simply rely on the expected number of elements.
drwp.clearObject = function(obj){
	for(var i=(obj.childNodes.length-1);i>-1;i--){
		if(obj.childNodes[i].id=="field"){
			return;
			}
		else{
			obj.removeChild(obj.childNodes[i]);
			}
		}
	return;
	}

 //Attaches an event to to any object that can accept them in either Netscape 6+, IE5.5 + or fully DOM compliant browsers
drwp.addEvent = function(anObject, evType, fn, useCapture){
	if(anObject.addEventListener){
		anObject.addEventListener(evType, fn, useCapture);
		return true;
		}
	else if(anObject.attachEvent){
		var r = anObject.attachEvent("on"+evType, fn);
		return r;
		}
	else if(typeof(anObject["on"+evType])=='object'){
		anObject["on"+evType]=fn;
		return anObject;
		}
	else{
		return false;
		}
	}

//Define and preload images for easy retrieval
drwp.imageObj = {};

//Locate the correct event image
drwp.callImageUrl = function(name){
    if(this.imageObj[name]){
        return this.imageObj[name];
    }
}

drwp.imageServer_shotchart = sp.imageServer + "/images/collegebasketball/gamecenter/shotchart/";
drwp.imageServer_teamIcons = sp.imageServer + "/images/collegebasketball/logos/25x25/";
drwp.imageServer_teamIcons = sp.imageServer + "/images/collegebasketball/logos/25x25/";

//Store Image and cache
drwp.imageObj["made"]     = drwp.imageServer_shotchart + "large_made.gif";      MM_preloadImages(drwp.imageObj["made"]);
drwp.imageObj["missed"]   = drwp.imageServer_shotchart + "large_missed.gif";    MM_preloadImages(drwp.imageObj["missed"]);
drwp.imageObj["lastshot"] = drwp.imageServer_shotchart + "last_shot.gif";       MM_preloadImages(drwp.imageObj["lastshot"]);
drwp.imageObj["homeicon"] = drwp.imageServer_teamIcons + sp.homeAbbr + ".png";  MM_preloadImages(drwp.imageObj["homeicon"]);
drwp.imageObj["awayicon"] = drwp.imageServer_teamIcons + sp.awayAbbr + ".png";  MM_preloadImages(drwp.imageObj["awayicon"]);
drwp.imageObj["homelogo"] = drwp.imageServer_teamLogos + sp.homeAbbr + ".png";  MM_preloadImages(drwp.imageObj["homelogo"]);
drwp.imageObj["awaylogo"] = drwp.imageServer_teamLogos + sp.awayAbbr + ".png";  MM_preloadImages(drwp.imageObj["awaylogo"]);
drwp.imageObj["spacer"]   = drwp.imageServer_shotchart + "spacer.gif";          MM_preloadImages(drwp.imageObj["spacer"]);

imagecached  =  true;

drwp.drawCurrentTeamAtTimeText = function(txt,className){
	var anEvent = drwp.currentShotFieldText;
	anEvent.className = className;
	anEvent.innerHTML = txt;
	}

//Create the shot and adds any dynamic events to the new elements
drwp.drawEvent = function(top,left,eventId,anEventObject,myEvent){
	var anEvent = new Object();
	var objEventDiv = document.createElement("div");
	objEventDiv.id = "shotDrive_" + eventId;
	objEventDiv.style.position = "absolute";
	objEventDiv.style.top = top + "px";
	objEventDiv.style.left = left + "px";
	objEventDiv.style.width = 12 + "px";
	objEventDiv.style.height = 12 + "px";
	objEventDiv.appendChild(anEventObject);
	var currentdistance = " " + myEvent.distance + "-ft. ";
	if(parseInt(myEvent.distance)==0){currentdistance = " ";}
	var txt = "HALF: "+myEvent.currentperiod
		+", TIME: "+myEvent.miltime
		+", "
		+myEvent.playername
		+" "
		+sp.shotResultArray[myEvent.shotresult]
		+" a"+currentdistance+sp.shotTypeArray[myEvent.shottype];
	drwp.addEvent(objEventDiv,"mouseover",function(){sp.clearObject(drwp.currentShotFieldText);drwp.drawCurrentTeamAtTimeText(txt,"shotInfoHighlight",sp.currentShotFieldText);},false);
	drwp.addEvent(objEventDiv,"mouseout",function(){sp.clearObject(drwp.currentShotFieldText);drwp.drawCurrentTeamAtTimeText("Mouse over shots for more information.","shotInfoText",sp.currentShotFieldText);},false);
	drwp.currentShotField.appendChild(objEventDiv);
	}

drwp.getShotResult = function(shotResult){
	//Create an icon depicting a made/missed/last shot.
	var img = document.createElement("img");
	shotResult = parseInt(shotResult);
	if(shotResult==0){
		img.src = drwp.callImageUrl("missed");
	}else{
		img.src = drwp.callImageUrl("made");
		}
	return img;
	}
//End Draw Constructor

function initLpsShotCharts(action){

	function initCurrentLpsShotChart(currentShotData){

		//Create new instance of the Shot object
		shotObj = new shot();
		
		//This line must be placed after a new Shot to empty the shots
		shotObj.currentShots.childNodes.length=0;
		
		//Normalize/Parse the data stream
		var i = shotObj.shotCount;
		if(shotObj.shotDataArray.length<i){
			i=shotObj.shotDataArray.length;
			}
		if(i!=0){
			do{
				var currentShotArray = shotObj.shotDataArray[i-1].split(",");
					possession = currentShotArray[0];
					miltime = currentShotArray[1];
					currentperiod = currentShotArray[2];
					playerid = currentShotArray[3];
					shottype = currentShotArray[4];
					shotresult = currentShotArray[5];
					xcoord = currentShotArray[6];
					ycoord = currentShotArray[7];
					distance = currentShotArray[8];
					shotObj.createChildNode(possession, miltime, currentperiod, playerid, shottype, shotresult, xcoord, ycoord, distance);
				}while (--i);
			}
		drawCurrentLpsShotChart(shotObj);
		}

	function drawCurrentLpsShotChart(shotObj){

	//Create new instance of the Draw object
	objDraw = new drawShot();

	var jumps = new Array(0,0);
	var layups = new Array(0,0);
	var dunks = new Array(0,0);

	var bool = true;
	objDraw.currentTeamIcon.src = objDraw.callImageUrl("spacer")
	objDraw.clearObject(objDraw.currentShotField);
	objDraw.clearObject(objDraw.currentTeamTotal);
	objDraw.clearObject(objDraw.currentPlayerJersey);
	objDraw.clearObject(objDraw.currentPlayerPosition);
	objDraw.currentPlayerImage.height = 55;
	objDraw.currentPlayerImage.width = 55;
	objDraw.currentPlayerImage.border = 0;

	if(document.currpossession==0){
		objDraw.currentPlayerImage.src = objDraw.callImageUrl("awaylogo");
		objDraw.currentPlayerLink.href = "/collegebasketball/teams/page/WI";
		
objDraw.currentPlayerName.innerHTML = "<b>Wisconsin&nbsp;Badgers</b>";

objDraw.currentFGs.innerHTML = "21-49";

objDraw.current3FG.innerHTML = "14-27";

objDraw.currentFT.innerHTML = "7-12";

objDraw.currentTeamTotal.innerHTML = "63";

	}
	else{
		objDraw.currentPlayerImage.src = objDraw.callImageUrl("homelogo");
		objDraw.currentPlayerLink.href = "/collegebasketball/teams/page/SYR";
		
objDraw.currentPlayerName.innerHTML = "<b>Syracuse&nbsp;Orange</b>";

objDraw.currentFGs.innerHTML = "27-49";

objDraw.current3FG.innerHTML = "5-9";

objDraw.currentFT.innerHTML = "5-9";

objDraw.currentTeamTotal.innerHTML = "64";

	}

	var madeshot = false;
	var node = (shotObj.currentShots.childNodes.length-1);
	if(node<0){node=0;}

	jumps[0]=0;
	jumps[1]=0;
	layups[0]=0;
	layups[1]=0;
	dunks[0]=0;
	dunks[1]=0;

	do{
		var myEvent = new Object(shotObj.currentShots.childNodes[node]);
		if((myEvent.playerid==document.playerid)||(document.playerid==0&&myEvent.possession==document.currpossession)||(action=="lastShot"&&myEvent.playerid==shotObj.currentShots.childNodes[0].playerid)){
		madeshot = true;

		var cs = myEvent.shottype;
		var csr = myEvent.shotresult;
		var shottype_isFreethrow = false;

		switch(cs){
			case 0:
			case 1:
			case 2:
			case 3:
			case 21:
			case 22:
			case 23:
			case 24:
				if(csr==1){jumps[0]=jumps[0]+1;}
				jumps[1]=jumps[1]+1;
			break;

			case 4:
			case 5:
			case 6:
			case 19:
			case 20:
			case 25:
				if(csr==1){layups[0]=layups[0]+1;}
				layups[1]=layups[1]+1;
			break;

			case 7:
			case 8:
			case 9:
			case 10:
				if(csr==1){dunks[0]=dunks[0]+1;}
				dunks[1]=dunks[1]+1;
			break;
		
			case 11:
				case 12:
				case 13:
				case 14:
				case 15:
				case 16:
				case 17:
				case 18:
					shottype_isFreethrow = true;
			break;
			}

			switch(myEvent.possession){
			case 0:
				var left = (25 + myEvent.xcoord)*shotObj.ratio;
				var top = (42 - myEvent.ycoord)*shotObj.ratio; //positive numbers
				break;
			case 1:
				var left = ((25 - myEvent.xcoord)*shotObj.ratio);
				var top = (42 + myEvent.ycoord)*shotObj.ratio; //negative numbers
				break;
				}
				
			switch(myEvent.xcoord){
				case 0:   left=145; break;
				case 25:  left=278; break;
				case -25: left=0;   break;
				}

			switch(myEvent.ycoord){
				case 0:   top=245;  break;
				case 42:  top=0;    break;
				case -42: left=248; break;
				}

			//exclude rendering of free throws
			if (!shottype_isFreethrow) {
				//Create a made or missed icon based on possessions
				var anEvent=objDraw.getShotResult(myEvent.shotresult);
                objDraw.drawEvent(top,left,node,anEvent,myEvent);
			}

			if(bool==true&&document.playerid!=0){
				objDraw.currentTeamIcon.src = myEvent.iconsrc;
				objDraw.currentIconLink.href = myEvent.iconhref;
				objDraw.currentPlayerName.innerHTML = myEvent.playerurl;
				objDraw.currentPlayerJersey.innerHTML = "#"+myEvent.jersey;
				objDraw.currentPlayerPosition.innerHTML = myEvent.playerposition;
				objDraw.currentFGs.innerHTML = myEvent.FGs;
				objDraw.current3FG.innerHTML = myEvent.threeFG;
				objDraw.currentFT.innerHTML = myEvent.FT;
				objDraw.currentTP.innerHTML = myEvent.TP;
				objDraw.currentPlayerImage.src = myEvent.playerimage;
				objDraw.currentPlayerLink.href = "/collegebasketball/players/playerpage/"+myEvent.playerid;
				objDraw.currentPlayerImage.height = 78;
				objDraw.currentPlayerImage.width = 58;
				objDraw.currentPlayerImage.onerror = function(evt){objDraw.currentPlayerImage.src = "http://sports.cbsimg.net/images/players/unknown_player.gif";}
				objDraw.currentPlayerImage.border = 1;
				objDraw.currentPlayerImage.style.borderColor = "#000000";
				}
			bool = false;
			}

			if(((madeshot==false && node == (shotObj.currentShots.childNodes.length-1))||shotObj.currentShots.childNodes.length==0)&&document.playerid!=0){
				objDraw.clearObject(objDraw.currentShotField);
				objDraw.clearObject(objDraw.currentTeamTotal);
				myEvent = shotObj.getPlayerInformation(document.playerid).split(",");
				if(document.currpossession==0){
					objDraw.currentTeamIcon.src = objDraw.callImageUrl("awayicon");
				}else{
					objDraw.currentTeamIcon.src = objDraw.callImageUrl("homeicon");
					}
				objDraw.currentPlayerName.innerHTML = "<a href='/collegebasketball/players/playerpage/"+document.playerid+"' target='_new'><b>" + myEvent[0] + "</b></a>";;
				objDraw.currentPlayerJersey.innerHTML = "#"+myEvent[1];
				objDraw.currentPlayerPosition.innerHTML = myEvent[2];
				objDraw.currentFGs.innerHTML = myEvent[3];
				objDraw.current3FG.innerHTML = myEvent[4];
				objDraw.currentFT.innerHTML = myEvent[5];
				objDraw.currentTP.innerHTML = myEvent[6];
				objDraw.currentPlayerImage.height = 78;
				objDraw.currentPlayerImage.width = 58;
				objDraw.currentPlayerImage.src = "http://sports.cbsimg.net/images/collegebasketball/players/60x80/" + document.playerid +".jpg";
				objDraw.currentPlayerImage.onerror = function(evt){objDraw.currentPlayerImage.src = "http://sports.cbsimg.net/images/players/unknown_player.gif";}
				objDraw.currentPlayerImage.border = 1;
				objDraw.currentPlayerImage.style.borderColor = "#000000";
				}
			objDraw.currentLayups.innerHTML=layups[0]+"-"+layups[1];
			objDraw.currentJumpers.innerHTML=jumps[0]+"-"+jumps[1];
			objDraw.currentDunks.innerHTML=dunks[0]+"-"+dunks[1];
			}
		while(node--)
		}
	initCurrentLpsShotChart(currentShotData);
	}

function playerJumpMenu(selObj,pos){ //form pulldown obj, possession
	var currentval = parseInt(selObj.options[selObj.selectedIndex].value);
	if(currentval!=-1&&currentShotData.length!=0){
		document.playerid=parseInt(currentval);
		document.currpossession = parseInt(pos);
		if(pos==0){
			document.awayform.awayselect.options.selectedIndex=0;
			}
		else{
			document.homeform.homeselect.options.selectedIndex=0;
			}
		initLpsShotCharts("currentShot");
		}
	}
